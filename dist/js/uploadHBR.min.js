var uploadHBR=function(){function e(e){var a=$(e).attr("data-index");$(d+" #base64_"+a).val(""),$(d+" #new_"+a).removeClass("hidden"),$(d+" #prev_"+a).addClass("hidden"),$(d+" #prev_"+a).find("img").attr("src",""),$(e).find(".uploadArea").removeClass("selected"),$(e).removeClass("selected")}function a(e){var a=f.join(",");return'<div class="box-drag column" draggable="true"><input type="hidden" name="base[]" id="base64_'+e+'" data-id="'+e+'"><div class="form-group"><div class="col-md-12 no-padding uploadArea" data-index="'+e+'"><span class="new" id="new_'+e+'" title="'+s+'" data-index="'+e+'"><input type="file" class="fileHidden hidden" multiple="" accept="'+a+'" id="hidden_'+e+'" data-index="'+e+'"><i class="'+c+'"></i><p>'+o+'</p></span><span class="image-preview hidden" id="prev_'+e+'"><div class="remove" title="'+l+'" data-index="'+e+'"><i class="'+u+'"></i></div><img class="img-responsive" src=""></span></div></div></div>'}function t(e){d=e.target;var t=$(e.target);if(!(t.length>0))return void console.log("Target not found : "+e.target);for(t.html(""),i=0;i<r;i++)t.append(a(i))}function n(){function a(){$(d+" .uploadArea").on("dragend",function(){$(this).removeClass("selected")}),$(d+" .uploadArea").on("dragleave",function(){$(this).removeClass("selected")}),$(d+" .uploadArea").on("dragstart",function(){$(this).addClass("selected")}),$(d+" .uploadArea").on("dragover",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("selected")}),$(d+" .uploadArea").on("dragenter",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("selected")}),$(d+" .uploadArea").on("drop",function(e){$(this).removeClass("selected"),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length&&(e.preventDefault(),e.stopPropagation(),n(e.originalEvent.dataTransfer.files))})}function t(e,a){var t=new FileReader;t.onload=function(e){$(d+" #prev_"+a).find("img").attr("src",e.target.result),$(d+" #prev_"+a).removeClass("hidden"),$(d+" #new_"+a).addClass("hidden"),$(d+" #base64_"+a).val(e.target.result).change()},t.readAsDataURL(e)}function n(e){var a=0;$.each(e,function(e,n){$.each(f,function(i,r){if("undefined"!=typeof $(d+" #base64_"+e).val()&&r===n.type)if(parseInt($(d+" #base64_"+e).val().length)>0)for(var o=0,s=a+1;s<$(d+' input[name*="base"]').length;s++)o||0!==parseInt($(d+" #base64_"+s).val().length)||(t(n,s),a=s,o++);else t(n,e)})})}function i(){$(d+" .remove").click(function(){e(this)}),$(d+" .new").click(function(){document.getElementById("hidden_"+$(this).attr("data-index")).click()}),$(d+" .fileHidden").change(function(){n(this.files)}),a()}function r(e){return e.preventDefault&&e.preventDefault(),$(d+" .column").css("opacity",1),$(this).find(".uploadArea").addClass("selected"),e.dataTransfer.dropEffect="move",!1}function o(e){[].forEach.call(v,function(e){e.classList.remove("over")})}function s(e){this.classList.add("over"),e.preventDefault(),e.stopPropagation()}function l(e){this.classList.remove("over"),$(d+" .uploadArea").removeClass("selected")}function c(e){this.style.opacity="0.4",p=this,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.innerHTML)}function u(e){e.stopPropagation&&e.stopPropagation(),null!==p&&p!==this&&(p.innerHTML=this.innerHTML,this.innerHTML=e.dataTransfer.getData("text/html"),$(d+" .uploadArea").removeClass("selected"),$(d+" .column").css("opacity",1)),i()}var p=null,v=document.querySelectorAll("#columns .column");[].forEach.call(v,function(e){e.addEventListener("dragstart",c,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("dragover",r,!1),e.addEventListener("dragleave",l,!1),e.addEventListener("drop",u,!1),e.addEventListener("dragend",o,!1)}),i()}var d,r=6,o="Adicionar",s="Clique ou arraste aqui uma foto",l="Clique aqui para remover a foto",c="fa fa-camera",u="fa fa-times",f=["image/jpeg","image/png"];return{init:function(e){return Modernizr.draganddrop?("undefined"!=typeof e.max&&(r=parseInt(e.max)),"undefined"!=typeof e.textNew&&(o=e.textNew),"undefined"!=typeof e.textTitle&&(s=e.textTitle),"undefined"!=typeof e.textTitle&&(s=e.textTitle),"undefined"!=typeof e.mimes&&(f=e.mimes),t(e),void n()):void console.log("Modernizr not enabled")},reset:function(a){var t=$(a);return t.length>0?void $.each($(t).find(".uploadArea"),function(a,t){e(this)}):void console.log("Target not found : "+a)}}}();
